
## Omnibenchmark schemas and requirements

This folder contains all JSON schemas and requirements list for the output files generated by an `Omnibenchmark project`. 

The files are first organized **per benchmark** and secondly **per keyword**. Each of these combinations contains an `output/requirements.json` file specifying the list of required output files for a particular combination of benchmark/ keyword (e.g. [`data` requirements](https://github.com/omnibenchmark/omniValidator/tree/main/src/omniValidator/schemas/omni_batch_py/omni_batch_data/output) for `omni_batch_py`) as well as providing additional metadata to guide the user.   

The structure of the folders are as follows:

```
BENCHMARK_X
    |
    ---> KEYWORD_X
            |
            ---> output
            |      |
            |      ---> requirements.json
            ---> JSON_SCHEMA_X
            ...
...

```

where: 

- the `output/requirements.json` specifies the **required files** for a given benchmark/ keyword (only the naming scheme and file extension is controlled)

- the schemas (in `.json` format) are used to control the **data structure and content** of the files using JSON schema structural validation. 

## Fields for `requirements.json` 

A `requirements.json` file typically looks like: 

```
{
    "Description": [...]        ## <-- A description of content fields

    "outputs_files": {          ## <-- All output files that are required
        "counts": {             ## <-- An example of required file with file extension and description
            "end": "mtx.gz",
            "description": "Count matrix in compressed format.", 
            "fields": "genes(rows) x cells(columns)"
        }, 
    [...]

    "example": {                ## <-- Examples from validated Omnibenchmark project
        "config": "https:...", 
        "data": "https:..."
    }

}

```

The fields described below are specified in any `requirements.json` file and directly used by the validation system of `Omnivalidator`. All extra fields are metadata meant to help the users but will not be checked against the outputs of your project. 

### `outputs_files`

Values in the `outputs_files` fields are expected to be present in the `omni_object` or output files. For an `omni_object`, the values in `omni_obj.outputs.file_mapping` are checked. These values should also be mappable in the name of the output files (e.g. `counts` files should produce files of format `[PREFIX]_counts.[END]). 

#### 1. ...`end`

The extension of each `outputs_files` files is expected to have an `end` extension. The validator will check for these file extensions. 

#### 2. (optional) ...`substitutable_with`

Some outputs can be substitutable, meaning that different outputs can be interchangeable if one of them is missing. The substitute to any field can be defined with an extra field of form: 

```
...
"outputs_files": {
    "outputA": {
        "description": "Some output", 
        "end": ".txt",
        "substitutable_with":["outputB"]}
    "outputB":{
        [...]
    }

```

in the above example, `outputA` may be absent from the `omni_object` or the output files if `outputB` is defined.